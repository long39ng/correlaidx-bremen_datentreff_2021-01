[{"path":"index.html","id":"warum-shiny","chapter":"1 Warum Shiny?","heading":"1 Warum Shiny?","text":"","code":""},{"path":"index.html","id":"daten","chapter":"1 Warum Shiny?","heading":"1.1 Daten","text":"","code":"\nlibrary(tidyverse)\n\nmobile <- read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-11-10/mobile.csv\",\n                   col_types = \"cciinnc\")\nmobile\n#> # A tibble: 6,277 x 7\n#>   entity      code   year total_pop gdp_per_cap mobile_subs continent\n#>   <chr>       <chr> <int>     <int>       <dbl>       <dbl> <chr>    \n#> 1 Afghanistan AFG    1990  13032161          NA           0 Asia     \n#> 2 Afghanistan AFG    1991  14069854          NA           0 Asia     \n#> 3 Afghanistan AFG    1992  15472076          NA           0 Asia     \n#> 4 Afghanistan AFG    1993  17053213          NA           0 Asia     \n#> 5 Afghanistan AFG    1994  18553819          NA           0 Asia     \n#> 6 Afghanistan AFG    1995  19789880          NA           0 Asia     \n#> # … with 6,271 more rows"},{"path":"index.html","id":"statische-grafiken-mit-ggplot2","chapter":"1 Warum Shiny?","heading":"1.2 Statische Grafiken mit {ggplot2}","text":"","code":""},{"path":"index.html","id":"karte-für-ein-bestimmtes-jahr","chapter":"1 Warum Shiny?","heading":"1.2.1 Karte für ein bestimmtes Jahr","text":"","code":""},{"path":"index.html","id":"plot","chapter":"1 Warum Shiny?","heading":"Plot","text":"","code":""},{"path":"index.html","id":"code","chapter":"1 Warum Shiny?","heading":"Code","text":"","code":"\nworld_map <- rnaturalearth::ne_countries(returnclass = \"sf\") %>% \n  select(iso_a3, geometry)\n\nmobile_world <- world_map %>% \n  left_join(mobile, by = c(\"iso_a3\" = \"code\"))\n\nmobile_world %>% \n  filter(year == 2015) %>% \n  ggplot(aes(fill = mobile_subs)) +\n  geom_sf(colour = \"#f8f8f8\", size = .25) +\n  scale_fill_continuous(guide = guide_legend(label.position = \"top\",\n                                             keywidth = 2,\n                                             keyheight = .5)) +\n  coord_sf(label_axes = \"----\", expand = FALSE, crs = \"+proj=eqearth\") +\n  labs(fill = NULL,\n       title = \"Mobilfunkanschlüsse pro 100 Menschen\",\n       subtitle = \"im Jahr 2015\",\n       caption = \"Daten: OurWorldInData.org\")"},{"path":"index.html","id":"facetted-grafik-für-mehrere-jahre","chapter":"1 Warum Shiny?","heading":"1.2.2 Facetted-Grafik für mehrere Jahre","text":"","code":""},{"path":"index.html","id":"plot-1","chapter":"1 Warum Shiny?","heading":"Plot","text":"","code":""},{"path":"index.html","id":"code-1","chapter":"1 Warum Shiny?","heading":"Code","text":"","code":"\nmobile_world %>% \n  filter(year %in% 2000:2015) %>% \n  ggplot(aes(fill = mobile_subs)) +\n  geom_sf(colour = \"#f8f8f8\", size = .25) +\n  scale_fill_continuous(guide = guide_legend(label.position = \"top\",\n                                             keywidth = 2,\n                                             keyheight = .5)) +\n  coord_sf(label_axes = \"----\", expand = FALSE, crs = \"+proj=eqearth\") +\n  facet_wrap(~year) +\n  labs(fill = NULL,\n       title = \"Mobilfunkanschlüsse pro 100 Menschen\",\n       caption = \"Daten: OurWorldInData.org\")"},{"path":"index.html","id":"gif-animationen","chapter":"1 Warum Shiny?","heading":"1.3 GIF-Animationen","text":"Mögliche Lösungen: {gganimate} (Grammar--Graphics-Umsetzung), {magick} (low-level, mehr Anpassungsmöglichkeiten)","code":""},{"path":"index.html","id":"beispiel-mit-magick-.panelset","chapter":"1 Warum Shiny?","heading":"Beispiel mit {magick} {.panelset}","text":"","code":""},{"path":"index.html","id":"plot-2","chapter":"1 Warum Shiny?","heading":"Plot","text":"","code":""},{"path":"index.html","id":"code-2","chapter":"1 Warum Shiny?","heading":"Code","text":"","code":"\nlibrary(colorspace)\nlibrary(patchwork)\nlibrary(magick)\nlibrary(ggtext)\n\ntheme_set(\n  theme_minimal() +\n    theme(axis.text = element_text(family = \"Space Mono\"),\n          panel.grid = element_blank(),\n          plot.title = element_text(family = \"Space Mono\",\n                                    face = \"bold\",\n                                    size = rel(1.6)),\n          plot.caption = element_markdown(family = \"Space Mono\",\n                                          face = \"bold.italic\",\n                                          hjust = 0))\n)\n\nmap_hist_layout <- c(\n  area(1, 1, 13, 14), # Map\n  area(12, 8, 13, 11), # Histogram\n  area(14, 1, 15, 14) # Slider\n)\n\n# # Determine histogram axis limit and number of bins\n# mobile %>% \n#   semi_join(world_map, by = c(\"code\" = \"iso_a3\")) %>% \n#   group_by(year) %>% \n#   slice_max(mobile_subs) %>% \n#   View()\n\nmobile_img <- image_graph(875, 600, res = 96)\n\nmobile_year_list <- group_split(mobile, year)\n\nout <- map(mobile_year_list, function(data) {\n  mobile_data <- world_map %>% \n    filter(iso_a3 != \"ATA\") %>% # Antarctica\n    left_join(data %>% \n                select(code, mobile_subs), by = c(\"iso_a3\" = \"code\"))\n  \n  mobile_map <- ggplot(\n    mobile_data,\n    aes(fill = cut_width(mobile_subs, width = 20, boundary = 0))\n  ) +\n    geom_sf(colour = \"#f8f8f8\", size = .25, show.legend = FALSE) +\n    coord_sf(label_axes = \"----\", expand = FALSE,\n             crs = \"+proj=robin\") + # Robinson projection\n    scale_fill_discrete_sequential(\"YlGnBu\", na.value = \"#cccccc\", nmax = 11) +\n    theme(plot.margin = margin(0, 0, 0, 0))\n  \n  mobile_hist <- ggplot(\n    mobile_data,\n    aes(mobile_subs, fill = cut_width(mobile_subs, width = 20, boundary = 0))\n  ) +\n    geom_histogram(binwidth = 20, boundary = 0, show.legend = FALSE) +\n    scale_x_continuous(limits = c(0, 220), n.breaks = 12,\n                       labels = function(x) {\n                         x[seq(2, 12, by = 2)] <- \"\"\n                         x\n                       }) +\n    scale_fill_discrete_sequential(\"YlGnBu\", nmax = 11) +\n    coord_cartesian(expand = FALSE) +\n    theme(axis.title.x = element_blank(),\n          axis.title.y = element_blank(),\n          axis.text.y = element_blank(),\n          plot.margin = margin(0, 0, 0, 0))\n  \n  year_slider <- ggplot(data = NULL, aes(x = 1990:2017, y = 1)) +\n    geom_line(size = 2, colour = \"#cccccc\") +\n    geom_point(aes(x = data$year), shape = 21, size = 4.5, stroke = .6,\n               fill = \"#f8f8f8\", colour = \"#26185f\") +\n    geom_text(aes(x = data$year, y = 1, label = data$year),\n              vjust = 1.75, family = \"Space Mono\") +\n    theme_void()\n  \n  print(\n    mobile_map + mobile_hist + year_slider +\n      plot_layout(design = map_hist_layout) +\n      plot_annotation(\n        title = \"Mobile phone subscriptions per 100 people\",\n        caption = \"Source: OurWorldInData.org<br>\n                   *Antarctica not included\"\n      )\n  )\n})\n\ndev.off()\n\nmobile_anim <- image_animate(mobile_img, fps = 2)\nprint(mobile_anim)"},{"path":"index.html","id":"htmlwidgets","chapter":"1 Warum Shiny?","heading":"1.4 htmlwidgets","text":"Interaktive Web-Visualisierungen basierend auf JavaScript. Bsp.: {plotly}, {highcharter}, {echarts4r}","code":""},{"path":"index.html","id":"timeline-in-echarts4r","chapter":"1 Warum Shiny?","heading":"1.4.1 “Timeline” in {echarts4r}","text":"","code":""},{"path":"index.html","id":"plot-3","chapter":"1 Warum Shiny?","heading":"Plot","text":"","code":""},{"path":"index.html","id":"code-3","chapter":"1 Warum Shiny?","heading":"Code","text":"","code":"library(echarts4r)mobile %>%   filter(year %in% 2000:2015) %>%   e_country_names(code, country, \"iso3c\") %>% # requires {countrycode}  group_by(year) %>%   e_charts(country, timeline = TRUE) %>%   e_map(mobile_subs) %>%   e_visual_map(min = 0, max = 200) %>%   e_title(\"Mobilfunkanschlüsse pro 100 Menschen\")"},{"path":"index.html","id":"section","chapter":"1 Warum Shiny?","heading":"","text":"Nachteile:Input betrifft nur das eigene WidgetKann nicht gleichzeitig nach mehreren Variablen filternNur Slider","code":""},{"path":"index.html","id":"crosstalk","chapter":"1 Warum Shiny?","heading":"1.4.2 {crosstalk}","text":"Ermöglicht Cross-Widget-Interaktionen","code":""},{"path":"index.html","id":"plots","chapter":"1 Warum Shiny?","heading":"Plots","text":"","code":""},{"path":"index.html","id":"code-4","chapter":"1 Warum Shiny?","heading":"Code","text":"","code":"\nlibrary(crosstalk)\nlibrary(plotly)\n\nshared_mobile <- SharedData$new(mobile)\n\nfilter_select(\"year\", \"Jahr\", shared_mobile, ~year, multiple = FALSE)\nfilter_checkbox(\"continent\", \"Kontinent\", shared_mobile, ~continent, columns = 5)\n\nplot_ly(shared_mobile, x = ~mobile_subs) %>% \n  add_histogram() %>%\n  layout(xaxis = list(title = \"Mobilfunkanschlüsse pro 100 Menschen\")) %>% \n  config(displayModeBar = FALSE)"},{"path":"index.html","id":"section-1","chapter":"1 Warum Shiny?","heading":"","text":"Nachteile:eingeschränkte FunktionalitätSharedData können nicht transformiert werdenverfügbar nur für wenige htmlwidgets bzw. Pakete","code":""}]
